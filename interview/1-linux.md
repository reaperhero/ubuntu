Linux系统启动流程是怎样的？

答案： BIOS/UEFI -> Boot Loader (GRUB) -> Kernel初始化 -> systemd/sysVinit -> Runlevels/Targets -> 登录界面

如何排查一个 CPU 使用率过高的问题？

思路：top/htop -> 找到异常进程 -> pidstat -u -t -p <PID> 1 看用户态/内核态CPU -> 如果是Java应用，jstack <PID> 抓取线程栈，分析是否死循环或频繁GC

awk工具使用


线上服务突然变慢，你的排查思路是什么？

思路：

监控： 查看监控大盘（CPU、内存、磁盘IO、网络IO、应用QPS、RT、错误率）。

链路： 查看调用链追踪（APM），定位慢在哪个环节（前端、网关、业务服务、数据库、缓存、第三方）。

系统： 登录服务器，用基础命令（top, vmstat, iostat, netstat）排查。

日志： 查看应用错误日志和慢查询日志。

变更： 近期是否有发布、配置变更？

抓包怎么抓

监控是否了解






location 块的不同匹配规则（=, ^~, ~, ~*）的优先级是怎样的？

答案： 优先级从高到低如下：

= /path：精确匹配。只匹配完全相同的路径，优先级最高。

^~ /path/：前缀匹配。匹配以指定模式开头的路径，一旦匹配成功，就不再检查正则表达式。

~ pattern：区分大小写的正则表达式匹配。

~* pattern：不区分大小写的正则表达式匹配。

/path/：通用前缀匹配。所有未加修饰符的前缀匹配，优先级最低





Nginx 支持哪些负载均衡算法？
轮询 (round-robin)： 默认方式，按时间顺序逐一分配。

加权轮询 (weighted round-robin)： 根据服务器权重分配，权重越高，分配的请求越多。

IP哈希 (ip_hash)： 根据客户端 IP 的哈希结果分配，可解决会话（Session）保持问题。

最少连接 (least_conn)： 将请求分配给当前活动连接数最少的服务器。

响应时间 (fair) - 第三方： 根据后端服务器的响应时间来分配请求。

URL哈希 (url_hash) - 第三方： 根据请求 URL 的哈希结果分配。


Nginx 的限流（limit_req_zone）基于漏桶算法 (Leaky Bucket) 的变体实现，其思想类似于一个经典的比喻：

桶 (Bucket)： 是一个缓冲区（在 Nginx 中对应 burst 参数）。

水 (请求)： 不断流入桶中。

令牌 (处理速率)： 以固定的速率（rate）生成令牌。只有拿到令牌的请求才能被处理。

桶的容量： 如果桶满了（缓冲区耗尽），新流入的请求就会被拒绝（限流）。

这种方式能够将不规则的、突发的大量请求整形为恒定速率的下游流量，从而保护后端服务。



